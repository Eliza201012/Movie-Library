{% extends "base.html" %}
{% load static %}

{% block title %}Movies | Movie Library{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/movies.css' %}">

<h1 class="page-title">ðŸŽ¥ Movie Collection</h1>

{% if user.is_staff %}
  <div style="text-align: center; margin: 20px 0;">
    <a href="{% url 'movies:create_movie' %}" class="btn-create">ðŸŽ¬ Create Movie</a>
  </div>

{% endif %}

<div class="movie-grid">
  {% for movie in movies %}
    <div class="movie-card" style="animation-delay: {{ forloop.counter0|add:"0.1"|floatformat:1 }}s;">
      <img src="{{ movie.poster.url }}" alt="{{ movie.title }}" class="movie-poster">
      <div class="movie-info">
        <h3 class="movie-title">{{ movie.title }}</h3>
        <p class="movie-desc">{{ movie.description|truncatechars:80 }}</p>
        <a href="{% url 'movies:movie_detail' movie.id %}" class="btn-view">View</a>
        {% if user.is_staff %}
          <a href="{% url 'movies:movie_update' movie.id %}" class="btn-edit">Edit</a>
          <a href="{% url 'movies:movie_delete' movie.id %}" class="btn-delete">Delete</a>
        {% endif %}
      </div>
    </div>
  {% empty %}
    <p style="text-align:center; color:#ccc;">No movies yet ðŸŽ¬</p>
  {% endfor %}
</div>
{% endblock %}
